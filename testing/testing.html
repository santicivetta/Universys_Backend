<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <script type="text/javascript" src="./jquery.js"></script>
  <link rel="stylesheet" type="text/css" href="./estilo.css">
</head>
<body>
  <header>
    <h1>Testing Unitario Backend</h1>
  </header>
  <main>
    <div id="botones">
      <h2>Testings Disponibles</h2>
      <button name="button" id="validarSesion">ValidarSesion</button>
      <button name="button" id="login">Login</button>
      <button name="button" id="todos"><strong>Todos</strong></button>
    </div>
    <div id="datos">
      <h2>Estado</h2>
      <div id="estado">
      </div>
      <h2>Consola</h2>
      <div id="respuesta">
      </div>
      <button name="button" id="limpiarConsola">Limpiar</button>
    </div>
  </main>
  <footer>
    Universys - Backend - Universidad de Belgrano
  </footer>

</body>
<script>
  $(document).on('ready',function(){
    
    $('#validarSesion').click(function(){
      cargando();
      validarSesion(true);
    });

    $('#login').click(function(){
      cargando();
      login(true);
    });

    $('#limpiarConsola').click(function(){
      $('#respuesta').empty();
    });

    $('#todos').click(function(){
      cargando();
      validarSesion();
      login(true);
    });

  });

  function validarSesion(estado=false){
    $.ajax({url: "testingValidarSesion/pruebaValidarSesion.php", 
        type: 'POST', 
        data: { },
       success : function(respuesta) {
         $('#respuesta').append(respuesta);
         if (estado){
            finalizado();
         }
       }
     })
  }

  function login(estado=false){
  $.ajax({url: "testingLogin/pruebaLogin.php", 
      type: 'POST', 
      data: { },
     success : function(respuesta) {
       $('#respuesta').append(respuesta);
       if (estado){
          finalizado();
       }
     }
   })
  }

  function deshabilitarTodos(){
    var botones=document.getElementsByName("button");
    for (var a=0; a<botones.length; a++){
      botones[a].disabled=true;
    }
  }

  function habilitarTodos(){
    var botones=document.getElementsByName("button");
    for (var a=0; a<botones.length; a++){
      botones[a].disabled=false;
    }
  }

  function cargando(){
    deshabilitarTodos();
    $("#estado").css("background", "#FFD889");
    $("#respuesta").css("background", "#FFD889");
    $('#estado').text("Cargando");
  }

  function finalizado(){
    habilitarTodos();
    $("#estado").css("background", "green");
    $("#respuesta").css("background", "green");
    $('#estado').text("Finalizado");
  }
</script>
</html>

